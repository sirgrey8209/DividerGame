# 세션 로그 - 2025-12-06
## 1. 환경 문제 해결
- **이슈**: PowerShell 실행 정책으로 인해 `npm` 명령 실행 차단됨.
- **해결**: 원인 파악 후 사용자가 수동 해결 또는 `npm.cmd` 사용으로 전환.

## 2. 시각효과 및 상호작용 개선
- **드래그 화살표 가시성**: SVG를 `position: fixed` 및 `width/height: 100vw/100vh`로 변경하여 좌표 불일치(전역 vs 로컬) 문제 해결.
- **드래그 곡선 개선**: "수직 시작, 자연스러운 진입" 스타일을 위해 3차 베지어(Cubic)에서 **2차 베지어(Quadratic)** 곡선으로 변경.
- **모바일 최적화**: 터치/드래그 상호작용에 집중하기 위해 컴포넌트의 마우스 호버 효과 제거. 텍스트 선택 간섭 방지를 위해 전역(index.css)에 `user-select: none` 추가.

## 3. 게임 메카닉 구현 (Divider)
- **쿨다운 시스템**:
    - `useGameStore`에 `weaponCooldowns` 구현.
    - **규칙**: 기본 무기 쿨다운 3초. '1' 무기는 1초.
    - **페널티**: 공격 실패 시 1초 단축 쿨다운 적용.
    - **시각효과**: 쿨다운 중일 때 무기가 회색으로 변하고 배경이 차오르는 애니메이션 표시.
- **Divider(나눗셈) 로직**:
    - **핵심 규칙**: `적 HP % 무기 데미지 == 0`인 경우에만 데미지 적용.
    - **데미지 계산**: `새 HP = 현재 HP / 무기 데미지`.
    - **예외**: 무기 '1'은 나눗셈 규칙을 무시하고 단순히 1을 뺌.
- **피드백 애니메이션**:
    - **성공**: 적이 "펄스"(확대/축소)하며 밝게 깜빡임.
    - **실패**: 적이 좌우로 "흔들리며"(Shake) 방어했음을 표시.

## 4. 버그 수정
- **적 보이지 않음**: `Enemy.tsx`에서 마운트 시 진입 애니메이션을 트리거하는 `useEffect`가 누락되어 수정.
- **충돌 감지**: `EnemyHandle`이 DOM 노드를 노출하지 않아 피격 판정이 깨지던 회귀 문제 수정. `useImperativeHandle`을 통해 `domNode` 노출.
- **문법 오류**: 부분 편집으로 인해 발생한 `App.tsx` 및 `Enemy.tsx`의 깨진 JSX 및 중첩 훅 오류 수정.

## 5. 현재 상태
- 모든 핵심 메카닉이 작동하며 게임 플레이 가능.
- 모바일(다크 테마, 애니메이션)에 맞춰 시각효과 폴리싱 완료.

## 6. 추가 개발 세션 (심야) - 밸런싱 및 배포
- **버그 수정 (심각)**:
  - **애니메이션 충돌**: `framer-motion`의 Spring 애니메이션이 다중 키프레임(`scale: [1, 1.4, 1]`)을 지원하지 않아 발생한 크래시 수정 (`type: 'tween'` 적용).
  - **데이터 손실**: `useGameStore.ts` 편집 중 발생한 코드 중복/손상으로 인해 밸런스 로직이 적용되지 않던 문제 완전 복구.
- **밸런싱**:
  - **상수 웨이브 난이도**: 적 공격 속도가 **초기 웨이브 크기**(`waveSize`)에 고정되도록 변경. 적이 죽어도 남은 적들의 속도가 빨라지지 않아 체감 난이도 완화.
  - **즉사 기믹**: 나눗셈 결과가 `1`이 될 경우 즉시 `0`으로 처리(처치).
- **비주얼 폴리싱**:
  - **네온 게이지**: 적 공격 타이머 색상을 **네온 퍼플**(` #b026ff`)로 변경 및 발광 효과(Glow) 추가. 가시성 대폭 개선.
  - **피격 효과**: 플레이어 피격 시 화면 전체(게임 영역 한정)가 붉게 점멸하는 `FlashOverlay` 추가.
  - **모바일 최적화 2차**: 
    - `100dvh` 적용으로 모바일 브라우저 주소창에 의한 짤림 현상 해결.
    - `touch-action: none` 및 `setPointerCapture` 적용으로 터치 드래그 시 스크롤/선택 간섭 완전 차단.
- **배포**:
  - `vite.config.ts` 설정 후 **GitHub Pages**에 성공적으로 배포됨.
  - URL: `https://sirgrey8209.github.io/AntigravityTest/`
